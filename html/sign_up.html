<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-signin-client_id"
        content="1088046569758-j17mctlibsvdmvousmtsa65qnel5pmgd.apps.googleusercontent.com.apps.googleusercontent.com.apps.googleusercontent.com">
    <title>Sign up</title>
    <link rel="stylesheet" href="../css/sign_up.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
        integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
    <main>
        <section class="boder_right log_in_hero-section">
        </section>
        <section>
            <form action="" method="post" class="sign_up_form" id="registrationForm">
                <div class="header_div">
                    <h1><img src="../assets/logo.svg" alt="u&doc logo">U&DOC<h1>
                            <h5>Your health, Our Priority.</h5>
                            <p><strong>Create an account to get started</strong></p>
                </div>
                <div>
                    <div name="user_fullname" id="user_fullname">
                        <input type="text" id="firstName" name="firstName" placeholder="First Name">
                        <input type="text" id="lastName" name="lastName" placeholder="Last Name">
                    </div>
                    <input type="text" name="username" id="username" placeholder="Username" class="input">
                    <input type="password" name="password" id="password" placeholder="Create a strong password"
                        class="input" minlength="8">
                    <div id="user_contact">
                        <input type="date" id="dateOfBirth" name="dateOfBirth">
                        <input type="tel" id="phoneNumber" name="phoneNumber" placeholder="(+234) |">
                    </div>
                    <input type="email" name="email" id="email" placeholder="Email Address" class="input">
                    <p id="login_page">Have an account? <a href="./log_in.html">Log In</a></p>
                </div>
                <div class="sign_up_div">
                    <input type="checkbox" name="accept_terms" required><span>I have read and accepted the U&Doc</span> <a
                        href="./terms.html">Terms of Use</a> and <a href="./privacy_policy.html" class="red_text">Privacy Policy.</a>
                    <button type="" class="sign_up_btn">Sign Up</button>
                    <div id="inline_parent_p">
                        <hr>
                        <p id="inline_p">or</p>
                    </div>
                    <button type="submit" id="google_auth_btn">
                        <img src="../assets/icons_google.svg" alt="Google logo" style="width: 2rem;">
                        <span id="auth_span"><strong id="auth_span_text">Sign Up with Google</strong></span>
                    </button>
                </div>
            </form>
            <div>
                <p class="p_footer">
                    <img src="../assets/openmoji_male-doctor.svg" alt="medical personnel icon">
                    <span>Register as a medical Personnel
                    <a href=""><a href="./medical_personel_registration.html" id="requiremnt">See Requirements</a></span>
                </p>
            </div>
        </section>
    </main>
    <!-- <script src="../js/password_pop_ups.js"></script> -->
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <script src="../js/index.js"></script>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-auth.js";

        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        const firebaseConfig = {
    apiKey: "AIzaSyAhYR3J4zRZzLoe5J-c5vaIpmT85NW-NQY",
    authDomain: "uanddoc.firebaseapp.com",
    projectId: "uanddoc",
    storageBucket: "uanddoc.appspot.com",
    messagingSenderId: "928013426861",
    appId: "1:928013426861:web:aaacbfe9b582b0e336a624",
    measurementId: "G-84FFBCFFX5"
  };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth();
  const provider = new GoogleAuthProvider()
    provider.setCustomParameters({ prompt: 'select_account' });


  const signInButton = document.querySelector('#google_auth_btn')
  console.log(signInButton);

  const userSignIn = async() => {
    signInWithPopup(auth, provider)
    .then((result) => {
        const user = result.user
        console.log(user, 'signed in');
        if(result) {
            alert('sign up sucessful')    
        }
    }).catch((error) => {
        const errorCode = error.code;
        const errorMessage = error.message
    })
  }


  const userSignOut = async() => {
    signOut(auth).then(() => {
        alert("You have signed out successfully!");
    }).catch((error) => {})
  }


  signInButton.addEventListener('click', userSignIn);
        

//   user signup authentication

// script.js

document.addEventListener('DOMContentLoaded', function () {
    const registrationForm = document.getElementById('registrationForm');

    registrationForm.addEventListener('submit', function (e) {
        e.preventDefault(); // Prevent the default form submission behavior

        // Get form data
        const formData = new FormData(registrationForm);

        // Define the URL of your backend API endpoint
        const apiUrl = 'https://u-and-doc.onrender.com/api/user/signup';

        // Send a POST request to the backend
        fetch(apiUrl, {
            method: 'POST',
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            // Handle the response from the backend (e.g., display a success message)
            console.log('Registration successful:', data);
        })
        .catch(error => {
            console.error('Error registering user:', error);
        });
    });
});

      </script>
</body>
</html>